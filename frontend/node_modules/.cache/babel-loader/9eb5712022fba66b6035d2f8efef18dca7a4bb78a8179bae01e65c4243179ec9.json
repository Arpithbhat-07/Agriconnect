{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{translations}from'../translations/translations';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const API_BASE='http://localhost:5000';function MarketPrices(_ref){let{language}=_ref;const[crop,setCrop]=useState('');const[location,setLocation]=useState('');const[prices,setPrices]=useState([]);const[loading,setLoading]=useState(false);const t=translations[language];useEffect(()=>{fetchPrices();},[]);const fetchPrices=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API_BASE,\"/market?crop=\").concat(crop,\"&location=\").concat(location));setPrices(response.data.prices);}catch(error){console.error('Error fetching prices:',error);alert('Error fetching market prices. Please try again.');}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\uD83D\\uDCB0 \",t.marketPrices]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',marginBottom:'20px'},children:t.marketInfo}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:t.crop}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:crop,onChange:e=>setCrop(e.target.value),placeholder:t.enterCrop})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:t.location}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:location,onChange:e=>setLocation(e.target.value),placeholder:t.enterLocationMarket})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:fetchPrices,disabled:loading,children:loading?t.loading:t.searchPrices}),prices.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px',overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:t.crop}),/*#__PURE__*/_jsx(\"th\",{children:t.location}),/*#__PURE__*/_jsx(\"th\",{children:t.market}),/*#__PURE__*/_jsx(\"th\",{children:t.price}),/*#__PURE__*/_jsx(\"th\",{children:t.change}),/*#__PURE__*/_jsx(\"th\",{children:t.date})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:prices.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:language==='hi'?item.crop_hi:language==='kn'?item.crop_kn:item.crop}),/*#__PURE__*/_jsx(\"td\",{children:item.location}),/*#__PURE__*/_jsx(\"td\",{children:item.market}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9\",item.current_price]}),\" / \",item.unit]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge \".concat(item.change>=0?'badge-success':'badge-warning'),children:[item.change>=0?'+':'',item.change]})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(item.last_updated).toLocaleDateString()})]},index))})]})}),!loading&&prices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",style:{marginTop:'20px'},children:t.noPriceData})]});}export default MarketPrices;","map":{"version":3,"names":["React","useState","useEffect","axios","translations","jsxs","_jsxs","jsx","_jsx","API_BASE","MarketPrices","_ref","language","crop","setCrop","location","setLocation","prices","setPrices","loading","setLoading","t","fetchPrices","response","get","concat","data","error","console","alert","children","marketPrices","style","color","marginBottom","marketInfo","className","type","value","onChange","e","target","placeholder","enterCrop","enterLocationMarket","onClick","disabled","searchPrices","length","marginTop","overflowX","market","price","change","date","map","item","index","crop_hi","crop_kn","current_price","unit","Date","last_updated","toLocaleDateString","noPriceData"],"sources":["C:/Users/arpit/Documents/Agriconnect-master/frontend/src/components/MarketPrices.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { translations } from '../translations/translations';\n\nconst API_BASE = 'http://localhost:5000';\n\nfunction MarketPrices({ language }) {\n  const [crop, setCrop] = useState('');\n  const [location, setLocation] = useState('');\n  const [prices, setPrices] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const t = translations[language];\n\n  useEffect(() => {\n    fetchPrices();\n  }, []);\n\n  const fetchPrices = async () => {\n    setLoading(true);\n    try {\n      const response = await axios.get(`${API_BASE}/market?crop=${crop}&location=${location}`);\n      setPrices(response.data.prices);\n    } catch (error) {\n      console.error('Error fetching prices:', error);\n      alert('Error fetching market prices. Please try again.');\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div>\n      <h2>ðŸ’° {t.marketPrices}</h2>\n      <p style={{ color: '#666', marginBottom: '20px' }}>{t.marketInfo}</p>\n\n      <div className=\"form-group\">\n        <label>{t.crop}</label>\n        <input\n          type=\"text\"\n          value={crop}\n          onChange={(e) => setCrop(e.target.value)}\n          placeholder={t.enterCrop}\n        />\n      </div>\n\n      <div className=\"form-group\">\n        <label>{t.location}</label>\n        <input\n          type=\"text\"\n          value={location}\n          onChange={(e) => setLocation(e.target.value)}\n          placeholder={t.enterLocationMarket}\n        />\n      </div>\n\n      <button className=\"btn\" onClick={fetchPrices} disabled={loading}>\n        {loading ? t.loading : t.searchPrices}\n      </button>\n\n      {prices.length > 0 && (\n        <div style={{ marginTop: '20px', overflowX: 'auto' }}>\n          <table className=\"table\">\n            <thead>\n              <tr>\n                <th>{t.crop}</th>\n                <th>{t.location}</th>\n                <th>{t.market}</th>\n                <th>{t.price}</th>\n                <th>{t.change}</th>\n                <th>{t.date}</th>\n              </tr>\n            </thead>\n            <tbody>\n              {prices.map((item, index) => (\n                <tr key={index}>\n                  <td>\n                    {language === 'hi' ? item.crop_hi : language === 'kn' ? item.crop_kn : item.crop}\n                  </td>\n                  <td>{item.location}</td>\n                  <td>{item.market}</td>\n                  <td>\n                    <strong>â‚¹{item.current_price}</strong> / {item.unit}\n                  </td>\n                  <td>\n                    <span className={`badge ${item.change >= 0 ? 'badge-success' : 'badge-warning'}`}>\n                      {item.change >= 0 ? '+' : ''}{item.change}\n                    </span>\n                  </td>\n                  <td>{new Date(item.last_updated).toLocaleDateString()}</td>\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      )}\n\n      {!loading && prices.length === 0 && (\n        <div className=\"alert alert-warning\" style={{ marginTop: '20px' }}>\n          {t.noPriceData}\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default MarketPrices;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}