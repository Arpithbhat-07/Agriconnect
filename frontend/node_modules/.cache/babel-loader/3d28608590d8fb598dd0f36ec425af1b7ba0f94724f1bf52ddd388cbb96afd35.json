{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import{translations}from'../translations/translations';import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";const API_BASE='http://localhost:5000';function MarketPrices(_ref){let{language}=_ref;const[crop,setCrop]=useState('');const[location,setLocation]=useState('');const[prices,setPrices]=useState([]);const[loading,setLoading]=useState(false);const t=translations[language];useEffect(()=>{fetchPrices();},[]);const fetchPrices=async()=>{setLoading(true);try{const response=await axios.get(\"\".concat(API_BASE,\"/market?crop=\").concat(crop,\"&location=\").concat(location));setPrices(response.data.prices);}catch(error){console.error('Error fetching prices:',error);alert('Error fetching market prices. Please try again.');}setLoading(false);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\"\\uD83D\\uDCB0 \",t.marketPrices]}),/*#__PURE__*/_jsx(\"p\",{style:{color:'#666',marginBottom:'20px'},children:\"Real-time market prices from various APMCs\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:t.crop}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:crop,onChange:e=>setCrop(e.target.value),placeholder:\"e.g., Rice, Wheat, Tomato\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:t.location}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:location,onChange:e=>setLocation(e.target.value),placeholder:\"e.g., Bangalore, Mumbai\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:fetchPrices,disabled:loading,children:loading?t.loading:t.searchPrices}),prices.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{marginTop:'20px',overflowX:'auto'},children:/*#__PURE__*/_jsxs(\"table\",{className:\"table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Crop\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Market\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Change\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Date\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:prices.map((item,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:language==='hi'?item.crop_hi:language==='kn'?item.crop_kn:item.crop}),/*#__PURE__*/_jsx(\"td\",{children:item.location}),/*#__PURE__*/_jsx(\"td\",{children:item.market}),/*#__PURE__*/_jsxs(\"td\",{children:[/*#__PURE__*/_jsxs(\"strong\",{children:[\"\\u20B9\",item.current_price]}),\" / \",item.unit]}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"span\",{className:\"badge \".concat(item.change>=0?'badge-success':'badge-warning'),children:[item.change>=0?'+':'',item.change]})}),/*#__PURE__*/_jsx(\"td\",{children:new Date(item.last_updated).toLocaleDateString()})]},index))})]})}),!loading&&prices.length===0&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-warning\",style:{marginTop:'20px'},children:\"No price data found. Try searching for specific crops or locations.\"})]});}export default MarketPrices;","map":{"version":3,"names":["React","useState","useEffect","axios","translations","jsxs","_jsxs","jsx","_jsx","API_BASE","MarketPrices","_ref","language","crop","setCrop","location","setLocation","prices","setPrices","loading","setLoading","t","fetchPrices","response","get","concat","data","error","console","alert","children","marketPrices","style","color","marginBottom","className","type","value","onChange","e","target","placeholder","onClick","disabled","searchPrices","length","marginTop","overflowX","map","item","index","crop_hi","crop_kn","market","current_price","unit","change","Date","last_updated","toLocaleDateString"],"sources":["C:/Users/siyan/OneDrive/Desktop/agriconnect/frontend/src/components/MarketPrices.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport { translations } from '../translations/translations';\r\n\r\nconst API_BASE = 'http://localhost:5000';\r\n\r\nfunction MarketPrices({ language }) {\r\n  const [crop, setCrop] = useState('');\r\n  const [location, setLocation] = useState('');\r\n  const [prices, setPrices] = useState([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const t = translations[language];\r\n\r\n  useEffect(() => {\r\n    fetchPrices();\r\n  }, []);\r\n\r\n  const fetchPrices = async () => {\r\n    setLoading(true);\r\n    try {\r\n      const response = await axios.get(`${API_BASE}/market?crop=${crop}&location=${location}`);\r\n      setPrices(response.data.prices);\r\n    } catch (error) {\r\n      console.error('Error fetching prices:', error);\r\n      alert('Error fetching market prices. Please try again.');\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>ðŸ’° {t.marketPrices}</h2>\r\n      <p style={{ color: '#666', marginBottom: '20px' }}>Real-time market prices from various APMCs</p>\r\n\r\n      <div className=\"form-group\">\r\n        <label>{t.crop}</label>\r\n        <input\r\n          type=\"text\"\r\n          value={crop}\r\n          onChange={(e) => setCrop(e.target.value)}\r\n          placeholder=\"e.g., Rice, Wheat, Tomato\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"form-group\">\r\n        <label>{t.location}</label>\r\n        <input\r\n          type=\"text\"\r\n          value={location}\r\n          onChange={(e) => setLocation(e.target.value)}\r\n          placeholder=\"e.g., Bangalore, Mumbai\"\r\n        />\r\n      </div>\r\n\r\n      <button className=\"btn\" onClick={fetchPrices} disabled={loading}>\r\n        {loading ? t.loading : t.searchPrices}\r\n      </button>\r\n\r\n      {prices.length > 0 && (\r\n        <div style={{ marginTop: '20px', overflowX: 'auto' }}>\r\n          <table className=\"table\">\r\n            <thead>\r\n              <tr>\r\n                <th>Crop</th>\r\n                <th>Location</th>\r\n                <th>Market</th>\r\n                <th>Price</th>\r\n                <th>Change</th>\r\n                <th>Date</th>\r\n              </tr>\r\n            </thead>\r\n            <tbody>\r\n              {prices.map((item, index) => (\r\n                <tr key={index}>\r\n                  <td>\r\n                    {language === 'hi' ? item.crop_hi : language === 'kn' ? item.crop_kn : item.crop}\r\n                  </td>\r\n                  <td>{item.location}</td>\r\n                  <td>{item.market}</td>\r\n                  <td>\r\n                    <strong>â‚¹{item.current_price}</strong> / {item.unit}\r\n                  </td>\r\n                  <td>\r\n                    <span className={`badge ${item.change >= 0 ? 'badge-success' : 'badge-warning'}`}>\r\n                      {item.change >= 0 ? '+' : ''}{item.change}\r\n                    </span>\r\n                  </td>\r\n                  <td>{new Date(item.last_updated).toLocaleDateString()}</td>\r\n                </tr>\r\n              ))}\r\n            </tbody>\r\n          </table>\r\n        </div>\r\n      )}\r\n\r\n      {!loading && prices.length === 0 && (\r\n        <div className=\"alert alert-warning\" style={{ marginTop: '20px' }}>\r\n          No price data found. Try searching for specific crops or locations.\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default MarketPrices;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}